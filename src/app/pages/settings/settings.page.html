<ion-header *transloco="let t">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>{{ t("SETTINGS.title") }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *transloco="let t">
  <ion-list>
    <ion-item button lines="none" (click)="editUserProfile()">
      <ion-avatar slot="start" class="user-avatar">
        <img *ngIf="userAvatar" [src]="'assets/icons/avatars/' + userAvatar + '.svg'" alt="User Avatar">
        <ion-skeleton-text *ngIf="!userAvatar" animated></ion-skeleton-text>
      </ion-avatar>
      <ion-label>
        <h3>{{ t("SETTINGS.edit-profile") }}</h3>
        <p>{{ username }}</p>
      </ion-label>
    </ion-item>

    <ion-item-group>

      <ion-item-divider>
        <ion-label>
          {{ t("SETTINGS.GENERAL.display") }}
        </ion-label>
      </ion-item-divider>

      <ion-item button (click)="openCurrencyModal()">
        <ion-icon name="cash-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h3>{{ t("SETTINGS.GENERAL.currency") }}</h3>
        </ion-label>

        <ion-label slot="end">
          <p>{{ userCurrency?.name }}</p>
        </ion-label>
      </ion-item>

      <ion-item button (click)="goTo('/categories-list')">
        <ion-icon name="pricetags-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h3>{{ t("GENERAL.categories") }}</h3>
          <p>{{ t("SETTINGS.GENERAL.categories.descr") }}</p>
        </ion-label>
      </ion-item>

      <ion-item [routerLink]="'general'">
        <ion-icon name="construct-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h3>{{ t("SETTINGS.GENERAL.other") }}</h3>
          <p>{{ t("SETTINGS.GENERAL.other.descr") }}</p>
        </ion-label>
      </ion-item>

    </ion-item-group>

    <ion-item-group>

      <ion-item-divider>
        <ion-label>
          {{ t("SETTINGS.DATA.display") }}
        </ion-label>
      </ion-item-divider>

      <ion-item [routerLink]="'/backup/export'">
        <ion-icon name="cloud-download-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h3>{{ t("BACKUP.EXPORT.title.sort") }}</h3>
          <p>{{ t("SETTINGS.DATA.export.descr") }}</p>
        </ion-label>
      </ion-item>

      <ion-item (click)="importData()">
        <ion-icon name="cloud-upload-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h3>{{ t("SETTINGS.DATA.import") }}</h3>
          <p>{{ t("SETTINGS.DATA.import.descr") }}</p>
        </ion-label>
        <input type="file" accept="application/json" hidden (change)="onFileSelected()" id="file-input">
      </ion-item>

      <ion-item button (click)="deleteAllData()">
        <ion-icon name="trash-outline" slot="start" color="danger"></ion-icon>
        <ion-label>
          <h3>{{ t("SETTINGS.DATA.delete-all") }}</h3>
        </ion-label>
      </ion-item>

    </ion-item-group>

    <ion-item-group>

      <ion-item-divider>
        <ion-label>
          {{ t("SETTINGS.HELP_US.display") }}
        </ion-label>
      </ion-item-divider>

      <ion-item href="https://play.google.com/store/apps/details?id=com.monekin.app">
        <ion-icon name="star-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h3>{{ t("SETTINGS.HELP_US.rate-us") }}</h3>
          <p>{{ t("SETTINGS.HELP_US.rate-us.descr") }}</p>
        </ion-label>
      </ion-item>

      <ion-item *ngIf="canShare" button (click)="shareLink()">
        <ion-icon name="share-social-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h3>{{ t("SETTINGS.HELP_US.share") }}</h3>
        </ion-label>
      </ion-item>

      <ion-item href="https://github.com/enrique-lozano/Monekin/issues/new/choose">
        <ion-icon name="chatbubble-ellipses-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h3>{{ t("SETTINGS.HELP_US.report") }}</h3>
        </ion-label>
      </ion-item>

    </ion-item-group>

    <ion-item-group>

      <ion-item-divider>
        <ion-label>
          {{ t("SETTINGS.PROJECT.display") }}
        </ion-label>
      </ion-item-divider>

      <ion-item [routerLink]="'legal'">
        <ion-icon name="file-tray-full-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h3>{{ t("SETTINGS.PROJECT.legal") }}</h3>
          <p>{{ t("SETTINGS.PROJECT.legal.descr") }}</p>
        </ion-label>
      </ion-item>

      <ion-item href="https://github.com/enrique-lozano/Monekin/graphs/contributors">
        <ion-icon name="people-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h3>{{ t("SETTINGS.PROJECT.contributors") }}</h3>
          <p>{{ t("SETTINGS.PROJECT.contributors.descr") }}</p>
        </ion-label>
      </ion-item>

      <ion-item href="mailto:lozin.technologies@gmail.com">
        <ion-icon name="mail-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h3>{{ t("SETTINGS.PROJECT.contact") }}</h3>
        </ion-label>
      </ion-item>

    </ion-item-group>

  </ion-list>
</ion-content>